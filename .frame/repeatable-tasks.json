{
  "tasks": [
    {
      "id": "repeatable-1739436000000-uat-node-selectors",
      "name": "Update UAT node selectors after nodepool scale",
      "description": "Scale up SGX nodepool if needed, fetch new node names, spread workloads across nodes, update all UAT values files, and commit to main.",
      "steps": [
        "/ten-update-node-selectors uat"
      ],
      "createdAt": "2026-02-13T09:00:00.000Z"
    },
    {
      "id": "repeatable-uat-destructive-deploy",
      "name": "UAT Destructive Deployment (consolidated workflow)",
      "description": "Full wipe + redeploy of UAT environment. Deploys L1 contracts, syncs parent app, then syncs children (PreSync hooks clean PVCs). Uses go-ten consolidated workflow.",
      "steps": [
        "gh workflow run manual-deploy-k8s-consolidated.yml -R ten-protocol/go-ten --ref fix/clean-consolidated-workflow-improvements -f testnet_type=uat-testnet -f deployment_strategy=destructive -f image_build=yes -f image_tag= -f advanced_config='log_level=3,max_gas_gwei=1.5,sync_timeout=10m,use_azure_hsm=no' -f 'destructive_options=node_selectors=sequencer=aks-sgxpool-35313246-vmss00000i,validator-01=aks-sgxpool-35313246-vmss00000j,validator-02=aks-sgxpool-35313246-vmss00000k,gateway=aks-sgxpool-35313246-vmss00000k'"
      ],
      "notes": [
        "Node selectors: sequencer=vmss00000i, validator-01=vmss00000j, validator-02=vmss00000k, gateway=vmss00000k",
        "Validator-03 (vmss00000a) is NOT handled by the workflow - node selector must be set manually in values file or via /ten-update-node-selectors",
        "No app deletion needed - PreSync hooks in ten-node chart handle PVC cleanup when global.destructiveDeployment=true",
        "Run /ten-update-node-selectors uat FIRST if nodepool was scaled to get fresh node names",
        "image_tag left empty = auto (uses git tag or commit hash)"
      ],
      "createdAt": "2026-02-16T00:00:00.000Z"
    },
    {
      "id": "repeatable-uat-nondestructive-deploy",
      "name": "UAT Non-Destructive Deployment (consolidated workflow)",
      "description": "Rolling update of UAT environment. Updates image tags and syncs ArgoCD apps without deleting existing state. No L1 contract redeployment. Uses go-ten consolidated workflow.",
      "steps": [
        "gh workflow run manual-deploy-k8s-consolidated.yml -R ten-protocol/go-ten --ref fix/clean-consolidated-workflow-improvements -f testnet_type=uat-testnet -f deployment_strategy=non-destructive -f image_build=yes -f image_tag= -f advanced_config='log_level=3,max_gas_gwei=1.5,sync_timeout=10m,use_azure_hsm=no'"
      ],
      "notes": [
        "No node selectors needed - non-destructive keeps existing allocation",
        "No additional_apps deletion - apps stay running",
        "Skips L1 contract deployment",
        "image_tag left empty = auto (uses git tag or commit hash)",
        "Use this for routine image updates without network reset"
      ],
      "createdAt": "2026-02-16T00:00:00.000Z"
    }
  ]
}
